---
import { getLocalizedPath, t, type Locale } from '../../i18n';

interface Props {
  title: string;
  description: string;
  pubDate: Date;
  slug: string;
  locale: Locale;
}

const { title, description, pubDate, slug, locale } = Astro.props;

const formattedDate = pubDate.toLocaleDateString(locale === 'ar' ? 'ar-SA' : 'en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric',
});

const postUrl = `${getLocalizedPath('blog', locale)}/${slug}`;
---

<article class="group relative rounded-2xl border border-border bg-card p-6 transition-shadow hover:shadow-lg">
  <time datetime={pubDate.toISOString()} class="text-sm text-muted-foreground">
    {formattedDate}
  </time>
  <h2 class="mt-3 text-xl font-semibold">
    <a href={postUrl} class="after:absolute after:inset-0">
      {title}
    </a>
  </h2>
  <p class="mt-3 line-clamp-3 text-muted-foreground">
    {description}
  </p>
  <div class="mt-4 flex items-center gap-2 text-sm font-medium text-primary">
    <span class="group-hover:underline">{t(locale, "blog.readMore")}</span>
    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 transition-transform group-hover:translate-x-1 rtl:rotate-180 rtl:group-hover:-translate-x-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
    </svg>
  </div>
</article>
